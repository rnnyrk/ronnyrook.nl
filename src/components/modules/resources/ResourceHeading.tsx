'use client';

import { useRef } from 'react';
import { motion, useInView } from 'framer-motion';
import { Container } from 'common/layout/Container';

const toggleVariants = {
  off: {
    stroke: 'black',
    opacity: 0,
    pathLength: 0,
    pathOffset: 0,
    transition: {
      duration: 2,
      ease: 'circOut',
    },
  },

  on: {
    stroke: '#FFFFFF',
    opacity: 1,
    pathLength: 1,
    pathOffset: 0,
    transition: {
      duration: 2,
      ease: 'circOut',
    },
  },
};

const svgProps = {
  xmlns: 'http://www.w3.org/2000/svg',
  fill: 'none',
  stroke: 'currentColor',
  className: 'h-10 w-10 mr-4',
};

export const ResourceHeading = ({ children, icon, text }: ResourceHeadingProps) => {
  const ref = useRef<HTMLDivElement | null>(null);
  const inView = useInView(ref, { once: true });

  return (
    <Container className="px-8">
      <div
        className="flex items-center mb-8"
        ref={ref}
      >
        {icon && (
          <>
            {icon === 'twitter' ? (
              <svg
                {...svgProps}
                viewBox="0 0 24 24"
              >
                <motion.path
                  variants={toggleVariants}
                  animate={inView ? 'on' : 'off'}
                  d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </svg>
            ) : null}

            {icon === 'codepen' ? (
              <svg
                {...svgProps}
                viewBox="0 0 187 189"
              >
                <motion.path
                  variants={toggleVariants}
                  animate={inView ? 'on' : 'off'}
                  d="m3.957 61.644.012-.008.011-.008L90.286 3.942l.002-.001L93.5 1.802l3.212 2.139.002.001 86.306 57.686.011.008.012.008 2.457 1.577v62.558l-2.457 1.578-.012.007-.011.008-86.306 57.686-.002.001-3.212 2.139-3.212-2.139-.002-.001L3.98 127.372l-.011-.008-.012-.007-2.457-1.578V63.221l2.457-1.577Zm83.85-39.646V19.18l-2.336 1.572-66.08 44.444-1.849 1.244 1.848 1.245 28.994 19.528.837.564.838-.563L87.144 62.3l.664-.446V21.998Zm13.722-1.245-2.337-1.572v42.673l.664.446 37.085 24.915.838.563.837-.564 28.994-19.528 1.848-1.245-1.849-1.244-66.08-44.444Zm-7.196 51.624-.833-.556-.833.556-31.242 20.876-1.866 1.247 1.866 1.247 31.242 20.875.833.557.833-.557 31.242-20.875 1.866-1.247-1.866-1.247-31.242-20.876Zm-79.111 6.064-2.337-1.572v35.262l2.337-1.572 22.026-14.814 1.85-1.245-1.85-1.245-22.026-14.814Zm158.893 1.244V76.87l-2.337 1.572-22.026 14.814-1.851 1.245 1.851 1.245 22.026 14.814 2.337 1.572V79.685ZM50.287 101.787l-.835-.565-.838.561-29.22 19.528-1.86 1.243 1.857 1.249 66.08 44.444 2.337 1.572v-42.67l-.66-.446-36.86-24.916Zm88.099-.004-.838-.561-.835.565-36.86 24.916-.66.446v42.67l2.336-1.572 66.08-44.444 1.856-1.249-1.86-1.243-29.219-19.528Z"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </svg>
            ) : null}

            {icon === 'brain' ? (
              <svg
                {...svgProps}
                viewBox="0 0 62 62"
              >
                <motion.path
                  variants={toggleVariants}
                  animate={inView ? 'on' : 'off'}
                  d="M62 25c0-3.433-2.007-6.561-5.05-8.06.032-.309.05-.622.05-.94 0-4.963-4.038-9-9-9-.076 0-.151.013-.228.015C46.865 3.005 43.28 0 39 0c-3.483 0-6.505 1.993-8 4.896C29.505 1.993 26.483 0 23 0a8.993 8.993 0 0 0-8.775 7.011C14.15 7.01 14.076 7 14 7c-4.962 0-9 4.037-9 9 0 .305.016.613.049.922C1.999 18.42 0 21.57 0 25c0 2.303.877 4.4 2.305 5.993A9 9 0 0 0 0 37c0 3.432 2.007 6.561 5.05 8.06-.032.309-.05.622-.05.94 0 4.963 4.038 9 9 9 .076 0 .15-.01.225-.011A8.994 8.994 0 0 0 23 62c3.483 0 6.505-1.993 8-4.896C32.495 60.007 35.517 62 39 62c4.28 0 7.865-3.005 8.772-7.015.077.002.152.015.228.015 4.962 0 9-4.037 9-9 0-.305-.017-.612-.049-.922C60.001 43.581 62 40.43 62 37c0-2.303-.877-4.4-2.305-5.993A9 9 0 0 0 62 25Zm-6.507 18.533-.785.3.16.825c.088.452.132.904.132 1.342 0 3.859-3.14 7-7 7 0-4.963-4.038-9-9-9v2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7V15h-2v38c0 3.859-3.14 7-7 7a6.992 6.992 0 0 1-6.783-5.288C20.109 53.721 23 50.196 23 46h-2c0 3.859-3.14 7-7 7s-7-3.141-7-7 3.14-7 7-7v-2c-3.932 0-7.275 2.539-8.497 6.06C3.372 41.824 2 39.51 2 37c0-1.734.647-3.395 1.793-4.673A8.94 8.94 0 0 0 9 34v-2c-3.86 0-7-3.141-7-7 0-2.878 1.812-5.504 4.507-6.533l.786-.301-.161-.825A6.997 6.997 0 0 1 7 16c0-3.859 3.14-7 7-7s7 3.141 7 7h2c0-4.196-2.891-7.721-6.783-8.712A6.992 6.992 0 0 1 23 2c3.86 0 7 3.141 7 7v4h2V9c0-3.859 3.14-7 7-7s7 3.141 7 7-3.14 7-7 7v2c4.962 0 9-4.037 9-9 3.86 0 7 3.141 7 7s-3.14 7-7 7v2c3.932 0 7.275-2.539 8.497-6.061A7.046 7.046 0 0 1 60 25a7.002 7.002 0 0 1-1.793 4.673A8.94 8.94 0 0 0 53 28c-4.962 0-9 4.037-9 9h2c0-3.859 3.14-7 7-7s7 3.141 7 7c0 2.878-1.812 5.504-4.507 6.533Z"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <motion.path
                  variants={toggleVariants}
                  animate={inView ? 'on' : 'off'}
                  d="M42 9h2c0-2.757-2.243-5-5-5v2c1.654 0 3 1.346 3 3Zm-6 44h-2c0 2.757 2.243 5 5 5v-2c-1.654 0-3-1.346-3-3Zm17-13v2c2.757 0 5-2.243 5-5h-2c0 1.654-1.346 3-3 3Zm-15-4h-2c0 3.309 2.691 6 6 6v-2c-2.206 0-4-1.794-4-4Zm2-14v-2c-3.309 0-6 2.691-6 6h2c0-2.206 1.794-4 4-4ZM24 36h-2c0 3.309 2.691 6 6 6v-2c-2.206 0-4-1.794-4-4Zm15-9h-2c0 3.309 2.691 6 6 6v-2c-2.206 0-4-1.794-4-4Zm-13-5v-2c-3.309 0-6 2.691-6 6h2c0-2.206 1.794-4 4-4ZM13 35h2c0-2.206 1.794-4 4-4v-2c-3.309 0-6 2.691-6 6Zm1 14v2c2.757 0 5-2.243 5-5h-2c0 1.654-1.346 3-3 3ZM4 25h2c0-1.654 1.346-3 3-3v-2c-2.757 0-5 2.243-5 5Zm10-14v2c1.654 0 3 1.346 3 3h2c0-2.757-2.243-5-5-5Zm9-7v2c1.654 0 3 1.346 3 3h2c0-2.757-2.243-5-5-5Z"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </svg>
            ) : null}
          </>
        )}
        {children}
      </div>
      {text && <p className="mb-16 text-lg">{text}</p>}
    </Container>
  );
};

type ResourceHeadingProps = {
  children: React.ReactNode;
  icon?: 'twitter' | 'github' | 'codepen' | 'brain';
  text?: string;
};
